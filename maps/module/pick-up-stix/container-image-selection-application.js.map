{"version":3,"sources":["module/pick-up-stix/container-image-selection-application.ts"],"names":[],"mappings":"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","file":"../../../src/module/pick-up-stix/container-image-selection-application.js","sourcesContent":["/**\r\n * Application class to display to select an item that the token is\r\n * associated with\r\n */\r\nexport default class ContainerImageSelectionApplication extends FormApplication {\r\n\tstatic get defaultOptions(): FormApplicationOptions {\r\n    return mergeObject(super.defaultOptions, {\r\n      closeOnSubmit: false,\r\n      submitOnChange: true,\r\n      id: \"pick-up-stix-container-image-selection\",\r\n\t    template: \"modules/pick-up-stix/module/pick-up-stix/templates/container-image-selection.html\",\r\n      height: 'auto',\r\n      width: 'auto',\r\n\t\t  minimizable: false,\r\n      title: `Choose Container Images`\r\n    });\r\n\t}\r\n\r\n\tprivate _html: any;\r\n\r\n\tconstructor(private _token: Token) {\r\n\t\tsuper(_token);\r\n\t\tconsole.log(`pick-up-stix | ContainerImageSelectionApplication | constructed with args:`)\r\n\t\tconsole.log(this._token);\r\n\t}\r\n\r\n\tactivateListeners(html) {\r\n\t\tconsole.log(`pick-up-stix | ContainerImageSelectionApplication | activateListeners called with args:`);\r\n\t\tconsole.log(html);\r\n\r\n    this._html = html;\r\n    super.activateListeners(this._html);\r\n\r\n    $(html).find('img').css('max-width', '160px').css('height', '160px').first().css('margin-right', '20px');\r\n    $(html).find('img').click(e => this._onClickImage(e));\r\n\r\n    $(html).find('h2').css('font-family', `\"Modesto Condensed\", \"Palatino Linotype\", serif`);\r\n\t}\r\n\r\n\tgetData() {\r\n    const data = {\r\n      data: this._token.data\r\n    }\r\n    console.log(data);\r\n    return data;\r\n  }\r\n\r\n  protected _onClickImage(e) {\r\n    const attr = e.currentTarget.dataset.edit;\r\n    const current = getProperty(this._token.data, `flags.pick-up-stix.pick-up-stix.${attr}`);\r\n    new FilePicker({\r\n      type: \"image\",\r\n      current,\r\n      callback: path => {\r\n        e.currentTarget.src = path;\r\n        this._onSubmit(event);\r\n      },\r\n      top: this.position.top + 40,\r\n      left: this.position.left + 10\r\n    }).browse(current);\r\n  }\r\n\r\n  _updateObject(e, formData) {\r\n    setProperty(formData, 'flags.pick-up-stix.pick-up-stix.imageContainerOpenPath', formData.imageContainerOpenPath);\r\n    setProperty(formData, 'flags.pick-up-stix.pick-up-stix.imageContainerClosedPath', formData.imageContainerClosedPath);\r\n    delete formData.imageContainerOpenPath;\r\n    delete formData.imageContainerClosedPath;\r\n    return this.object.update(formData);\r\n  }\r\n}\r\n"]}